---
title: "UAS DATA VISUALIZATION"
author: "Rahmat Riansyah"
date: "`r Sys.Date()`"
output: 
  html_document:
    css: style.css
    theme: cerulean
    highlight: zenburn
    toc: true
    toc_float: true
    df_print: paged
bibliography: references.bib
---

```{=html}
<style>
body{
text-align: justify}
</style>
```
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Judul dan Deskripsi

## Disusun Oleh
**Nama Mahasiswa**    : Rahmat Riansyah  
**NIM**               : A3202300029  
**Deskripsi**         : Tujuan analisis untuk memahami pola dan hubungan dalam data Angka Harapan Hidup, Pendapatan per Kapita, dan faktor-faktor lainnya.

## Persiapan
Sebelum membuat sebuah program di dalam R Markdown kita harus memperhatikan beberapa yang perlu kita persiapkan untuk menunjang isi data beserta visualisasinya.

### Memanggil Library
Hal pertama yang perlu dipersiapkan adalah dengan memanggil beberapa library yang di butuhkan yaitu dengan menginstal di menu Packages dan cara memanggilnya seperti berikut.

```{r}
library(ggplot2)
library(readr)
library(readxl)
library(gapminder)
library(reshape2)
library(gganimate)
library(plotly)
```

### Memanggil Dataset
Selain Library kita juga perlu memanggil Data yang akan kita gunakan dalam pembuatan visualisasi tersebut.Untuk tugas kali ini karena kita menggunakan data Excel dapat mengikuti kode dibawah ini.

```{r}
# memanggil library
library(readxl)
# membuat nama data dan memanggilnya sesuai nama file
Data <- read_excel("Data.xlsx")
# melihat data yang telah diberi nama
View(Data)
```

# Membuat Visualisasi Data
Setelah memanggil data yang akan kita gunakan selanjutnya menentukan grafik apa yang akan kita buat secara berbeda.Dari ujian tersebut terdapat 4 minimal visualisasi data seperti berikut:

## **1. Grafik Univariate**
Grafik univariate digunakan untuk menganalisis distribusi satu variabel tunggal. Grafik ini membantu dalam memahami pola, sebaran, dan karakteristik dari data yang dianalisis.

### Deskripsi
- **Jenis Grafik**: Histogram
- **Penjelasan**: 
  - Menunjukkan distribusi satu variabel.
  - Contoh: Histogram untuk menunjukkan distribusi Angka Harapan Hidup di berbagai negara.
- **Judul**: "Distribusi Angka Harapan Hidup di Negara-Negara"
- **Label Sumbu**:
  - Sumbu X: "Angka Harapan Hidup"
  - Sumbu Y: "Frekuensi"
- **Interpretasi**: 
  - Menjelaskan pola distribusi, seperti apakah data terdistribusi normal, ada outlier, atau pola lain yang terlihat.

### Hasil Grafik
```{r}
# Memanggil library
library(ggplot2)
library(readxl)

# Membaca data dari file Excel
Data <- read_excel("Data.xlsx")

# Membuat histogram
ggplot(Data, aes(x = Angka_Harapan_Hidup)) +
  geom_histogram(binwidth = 2, fill = "#37AFE1", color = "white") +
  labs(title = "Distribusi Angka Harapan Hidup di Negara-Negara",
       x = "Angka Harapan Hidup",
       y = "Frekuensi")
```


## **3. Grafik Multivariate**
Grafik multivariate digunakan untuk menganalisis hubungan antara lebih dari dua variabel. Grafik ini membantu dalam memahami interaksi dan pola yang lebih kompleks dalam data.

### Deskripsi
- **Jenis Grafik**: Scatter Plot dengan Facet
- **Penjelasan**: 
  - Menunjukkan hubungan antara Angka Harapan Hidup, Pendapatan per Kapita, dan Benua.
- **Judul**: "Hubungan antara Pendapatan per Kapita dan Angka Harapan Hidup Berdasarkan Benua"
- **Label Sumbu**:
  - Sumbu X: "Pendapatan per Kapita"
  - Sumbu Y: "Angka Harapan Hidup"
- **Interpretasi**: 
  - Menjelaskan bagaimana Pendapatan per Kapita mempengaruhi Angka Harapan Hidup dan bagaimana pola ini bervariasi antar benua.

### Hasil Grafik
```{r}
# Memanggil library
library(ggplot2)

# Membuat scatter plot multivariate dengan facet
ggplot(Data, aes(x = Pendapatan_per_kapita, y = Angka_Harapan_Hidup, color = Benua, size = Populasi)) +
  geom_point(alpha = 0.7, stroke = 1.5, shape = 21, fill = "white") +  # Mengatur transparansi dan bentuk titik
  labs(title = "Hubungan antara Pendapatan per Kapita dan Angka Harapan Hidup Berdasarkan Benua",
       x = "Pendapatan per Kapita (USD)",
       y = "Angka Harapan Hidup (Tahun)",
       color = "Benua",
       size = "Populasi") +
  theme_minimal(base_size = 15) +  # Menggunakan tema minimal dengan ukuran font yang lebih besar
  scale_color_brewer(palette = "Set1") +  # Menggunakan palet warna yang menarik
  facet_wrap(~ Benua, scales = "free") +  # Memecah grafik berdasarkan Benua dengan skala bebas
  theme(legend.position = "right", 
        plot.title = element_text(hjust = 0.5, size = 20, face = "bold"),  # Memusatkan dan memperbesar judul
        axis.title = element_text(size = 14),  # Memperbesar ukuran label sumbu
        axis.text = element_text(size = 12)) +  # Memperbesar ukuran teks sumbu
  coord_cartesian(expand = TRUE)  # Memperluas tampilan grafik
```
###Penjelasan Kode
- **geom_point(alpha = 0.7, stroke = 1.5, shape = 21, fill = "white")**: Menambahkan titik dengan transparansi, bentuk, dan warna latar belakang yang menarik.
- **theme_minimal(base_size = 15)**: Menggunakan tema minimal dengan ukuran font yang lebih besar untuk keterbacaan yang lebih baik.
- **facet_wrap(~ Benua, scales = "free")**: Memecah grafik menjadi beberapa panel berdasarkan benua dengan skala bebas, memungkinkan setiap panel untuk memiliki rentang sumbu yang berbeda.
- **theme(...)**: Menyesuaikan posisi legenda, memusatkan dan memperbesar judul, serta memperbesar ukuran label dan teks sumbu.
- **coord_cartesian(expand = TRUE)**: Memperluas tampilan grafik untuk memberikan ruang tambahan di sekitar titik data.

### Penjelasan Hasil Grafik
- **Interaksi**: Dalam grafik ini, setiap titik mewakili sebuah negara. Warna titik menunjukkan benua negara tersebut, dan ukuran titik menunjukkan populasi negara. Ini memberikan informasi tambahan yang membantu dalam analisis.
- **Analisis**: Dari grafik, kita dapat melihat bahwa ada kecenderungan positif antara Pendapatan per Kapita dan Angka Harapan Hidup, yang menunjukkan bahwa negara dengan Pendapatan per Kapita yang lebih tinggi cenderung memiliki Angka Harapan Hidup yang lebih tinggi. Selain itu, kita dapat melihat perbedaan antara benua-benua yang berbeda dalam hal distribusi Pendapatan per Kapita dan Angka Harapan Hidup.

## **3. Grafik Multivariate**
Grafik multivariate digunakan untuk menganalisis hubungan antara lebih dari dua variabel. Grafik ini membantu dalam memahami interaksi dan pola yang lebih kompleks dalam data.

### Deskripsi
- **Jenis Grafik**: Heatmap
- **Penjelasan**: 
  - Menunjukkan hubungan antara Angka Harapan Hidup, Benua, dan Tahun.
- **Judul**: "Analisis Angka Harapan Hidup Berdasarkan Benua dan Tahun"
- **Label Sumbu**:
  - Sumbu X: "Tahun"
  - Sumbu Y: "Benua"
- **Interpretasi**: 
  - Menjelaskan pola Angka Harapan Hidup di berbagai benua dari tahun ke tahun.

### Hasil Grafik
```{r}
# Memanggil library
library(ggplot2)
library(reshape2)

# Mengubah data menjadi format yang sesuai untuk heatmap
heatmap_data <- dcast(Data, Benua ~ Tahun, value.var = "Angka_Harapan_Hidup")

# Membuat heatmap
ggplot(melt(heatmap_data), aes(x = variable, y = Benua, fill = value)) +
  geom_tile(color = "white") +  # Menambahkan garis putih di antara kotak
  scale_fill_gradient(low = "white", high = "blue", name = "Angka Harapan Hidup") +  # Mengatur gradien warna
  labs(title = "Analisis Angka Harapan Hidup Berdasarkan Benua dan Tahun",
       x = "Tahun",
       y = "Benua") +
  theme_minimal(base_size = 15) +  # Menggunakan tema minimal dengan ukuran font yang lebih besar
  theme(axis.text.x = element_text(angle = 45, hjust = 1),  # Memiringkan label sumbu X
        plot.title = element_text(hjust = 0.5, size = 20, face = "bold"))  # Memusatkan dan memperbesar judul
```
###Penjelasan Kode
- **geom_point(alpha = 0.7)**: Menambahkan titik ke plot dengan transparansi untuk mengurangi tumpang tindih.
- **labs(...)**: Menambahkan judul dan label sumbu.
- **theme_minimal()**: Menggunakan tema minimal untuk tampilan yang bersih dan profesional.
- **scale_color_brewer(palette = "Set1")**: Menggunakan palet warna yang menarik untuk membedakan benua.
- **facet_wrap(~ Benua)**: Memecah grafik menjadi beberapa panel berdasarkan benua, memungkinkan perbandingan yang lebih mudah.
- **theme(legend.position = "right")**: Menempatkan legenda di sebelah kanan untuk aksesibilitas yang lebih baik.

## **4. Grafik Interaktif**
Grafik interaktif memungkinkan pengguna untuk berinteraksi dengan data secara langsung. Ini memberikan pengalaman yang lebih mendalam dan memungkinkan eksplorasi data yang lebih fleksibel.

### Deskripsi
- **Jenis Grafik**: Grafik Garis Interaktif
- **Penjelasan**: 
  - Menunjukkan tren Angka Harapan Hidup dari tahun ke tahun untuk setiap negara.
- **Judul**: "Tren Angka Harapan Hidup dari Tahun ke Tahun"
- **Label Sumbu**:
  - Sumbu X: "Tahun"
  - Sumbu Y: "Angka Harapan Hidup"
- **Interpretasi**: 
  - Menjelaskan bagaimana Angka Harapan Hidup berubah seiring waktu dan memungkinkan pengguna untuk melihat tren untuk negara tertentu.

### Hasil Grafik
```{r}
# Memanggil library
library(plotly)

# Membuat grafik garis interaktif
line_plot <- plot_ly(Data, 
                      x = ~Tahun, 
                      y = ~Angka_Harapan_Hidup, 
                      type = 'scatter', 
                      mode = 'lines+markers', 
                      color = ~Negara, 
                      text = ~paste("Negara:", Negara, "<br>Tahun:", Tahun, "<br>Angka Harapan Hidup:", Angka_Harapan_Hidup),
                      hoverinfo = "text") %>%
  layout(title = "Tren Angka Harapan Hidup dari Tahun ke Tahun",
         xaxis = list(title = "Tahun", tickmode = "linear"),
         yaxis = list(title = "Angka Harapan Hidup"),
         showlegend = TRUE,
         legend = list(title = list(text = 'Negara')),
         hovermode = "closest") %>%
  animation_opts(frame = 100, redraw = TRUE) %>%
  animation_slider(currentvalue = list(prefix = "Tahun: "))  # Menambahkan slider untuk tahun

# Menampilkan grafik interaktif
line_plot
```
### Penjelasan Kode
- **plot_ly(...)**: Membuat grafik garis menggunakan fungsi plot_ly dari paket plotly.
-**type = 'scatter', mode = 'lines+markers'**: Menentukan jenis grafik sebagai scatter plot dengan garis dan penanda.
- **color = ~Negara**: Menggunakan warna yang berbeda untuk setiap negara.
- **text = ~paste(...)**: Menambahkan informasi tambahan yang ditampilkan saat pengguna mengarahkan kursor ke titik data.
- **hoverinfo = "text"**: Menentukan informasi yang ditampilkan saat hover.
- **layout(...)**: Menentukan judul dan label sumbu untuk grafik.
- **animation_opts(...)**: Menambahkan opsi animasi untuk membuat grafik lebih dinamis.
- **animation_slider(...)**: Menambahkan slider untuk tahun, memungkinkan pengguna untuk melihat perubahan Angka Harapan Hidup dari tahun ke tahun.

# Kesimpulan
Dari analisis ini, terlihat bahwa Pendapatan per Kapita berpengaruh positif terhadap Angka Harapan Hidup. 
Dengan meningkatnya pendapatan, angka harapan hidup juga cenderung meningkat, menunjukkan adanya hubungan yang signifikan 
antara kedua variabel tersebut.